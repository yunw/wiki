<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css" />
<title>android battery</title>
<meta http-equiv="Content-Type" content="text/html; charset=" />
</head>
<body>

<p>
代码见：
frameworks/base/services/jni/com_android_server_BatteryService.cpp
</p>

<p>
register_android_server_BatteryService 主要从 sysfs 文件系统中读取相应信息
</p>

<p>
kernel 将电源相关的信息放在 /sys/class/power_supply 路径下
</p>

<p>
该目录下有 ac/battery 两个目录，根据其中的类型 type 来确定各信息的位置。
</p>

<p>
gFieldIds 负责记录有关电源的信息：
</p>

<ol>
<li>
mAcOnline;
</li>
<li>
mUsbOnline;
</li>
<li>
mBatteryStatus;
</li>
<li>
mBatteryHealth;
</li>
<li>
mBatteryPresent;
</li>
<li>
mBatteryLevel;
</li>
<li>
mBatteryVoltage;
</li>
<li>
mBatteryTemperature;
</li>
<li>
mBatteryTechnology;
</li>
</ol>

</body>
</html>
